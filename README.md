# 应用经济学模型建设 · 语料收集与管理平台

本项目是一个基于智能化语料收集与清洗平台，专为应用经济学模型的构建与验证提供高质量的习题与问答数据支持。平台集成了 **智能解析**、**多维质量检测** 和 **高效人工复核** 机制，显著降低了从原始文档到结构化数据集的清洗成本。

---

## 🔥 核心特性

### 1. 智能 Excel 解析 (Smart Parsing)
- **语义自适应**：无需严格模板，算法自动识别“题干”、“答案”、“解析”等列名的多种变体（如 `Answer`/`正确答案`/`参考答案`）。
- **结构化提取**：
  - **自动推断题型**：根据 Sheet 名称或内容特征自动分类（选择、填空、判断、简答、论述、案例分析）。
  - **数据集拆分**：上传单个混合文件，系统自动将其按题型拆分为多个独立的结构化数据集。
  - **序号溯源**：完整保留原始文件的“序号”列，便于问题追溯。

### 2. 深度质量检测 (Quality Assurance)
平台内置了针对不同题型的专项检测规则，有效拦截潜在的数据质量问题：
- **选择题增强**：
  - **鲁棒的选项识别**：支持 `A.` / `A．` (全角) / `(A)` / `a.` / `A 选项` 等多种格式，精准提取选项 Key。
  - **逻辑校验**：自动校验答案是否在选项范围内，智能排除数学公式（如 `P/E`）或变量名（如 `R_f`）的干扰。
- **通用检测**：
  - **完整性检查**：自动标记空题干、空答案、缺失知识点等。
  - **格式规范**：检测答案长度异常、判断题答案不规范（自动兼容 T/F/√/×）。
  - **误判消除**：专为经济学语料优化，兼容 LaTeX 公式与特殊符号。

### 3. 高效复核 UI (Interactive Review)
- **沉浸式浏览**：
  - **顺序浏览模式**：支持全量数据的逐条预览与校验。
  - **随机抽检模式**：快速抽取 20 条样本进行质量评估。
- **问题聚焦**：
  - **"仅显示问题项"**：一键过滤，红色高亮显示存在质量警告的行。
- **灵活导出**：
  - 支持导出 **全量数据** 或 **仅问题报告**。
  - 提供 **UTF-8** (通用) 和 **GBK** (Excel 友好) 两种编码选项。

---

## 🛠 技术架构

```
.
├── app.py                      # Streamlit 应用入口（主控制器）
├── modules/
│   ├── parsing.py              # 核心解析引擎（语义映射、正则提取、类型推断）
│   ├── quality.py              # 质量评估系统（规则库、评分逻辑、错误标记）
│   ├── ui.py                   # 界面组件库（Tab 布局、表格渲染、交互控件）
│   ├── auth.py                 # 用户认证模块
│   └── storage.py              # 文件存储与管理
├── config/
│   └── users.yaml              # 用户权限配置
└── tests/                      # 单元测试套件
```

## 🚀 快速开始

### 环境依赖
- Python 3.8+
- 依赖库：`streamlit`, `pandas`, `openpyxl`, `pyyaml`

### 安装与运行
1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **启动应用**
   ```bash
   streamlit run app.py
   ```
   访问浏览器 `http://localhost:8501` 即可使用。

3. **容器化部署 (Docker)**
   ```bash
   # 构建镜像
   docker build -t ae-corpus:latest .
   # 运行容器
   docker run -p 8501:8501 ae-corpus:latest
   ```

---

## 📅 项目规划 (Roadmap)

- [x] **解析增强**：支持复杂 Excel 结构、多 Sheet 解析、智能表头映射
- [x] **质量检测**：选项与答案一致性校验、防误判逻辑优化
- [x] **交互优化**：问题行高亮筛选、多种编码导出、列显示控制
- [ ] **协同标注**：引入多用户在线纠错与标注功能 (`Next Priority`)
- [ ] **存储升级**：集成 MinIO/S3 对象存储，支持版本管理
- [ ] **多样化输入**：扩展对 Word/PDF 文档的解析支持
- [ ] **覆盖率提升**：单元测试覆盖率目标 > 80%

## 📄 参考文档
- 需求文档：`PRD.md`

